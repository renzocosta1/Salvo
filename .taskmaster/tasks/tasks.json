{
  "master": {
    "tasks": [
      {
        "id": 21,
        "title": "Database Schema Expansion for Maryland Primary Alpha",
        "description": "Implement the core database schema changes required for geographic targeting, voter verification, and the digital ballot system.",
        "details": "Run SQL migrations to: 1. Add address, district (legislative/congressional), and verification fields to 'profiles'. 2. Create 'md_ballots', 'md_ballot_races', and 'md_ballot_candidates' tables. 3. Create 'user_ballot_commitments' and 'election_day_verifications' tables. 4. Create 'synced_contacts' table for relational recruitment. 5. Add 'mission_type', 'mission_deadline', and 'requires_gps' columns to 'directives' table.",
        "testStrategy": "Verify schema updates in Supabase Dashboard. Ensure foreign key constraints and UNIQUE constraints (e.g., user_id on election_day_verifications) are correctly applied. Test row insertion for each new table.",
        "priority": "high",
        "dependencies": [],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 22,
        "title": "Maryland Geographic Lookup Engine",
        "description": "Create a robust utility for mapping coordinates to Maryland-specific legislative and congressional districts.",
        "details": "1. Create 'assets/data/maryland_districts.json' containing all 47 Legislative Districts mapped to Counties and 8 Congressional Districts. 2. Implement a service that takes Mapbox lat/lng and performs a lookup against this JSON (or a simplified geo-spatial query). 3. Focus initial high-accuracy mapping on Montgomery County and MD-6 districts.",
        "testStrategy": "Unit test the lookup utility with known coordinates for Montgomery County District 15 to ensure it returns the correct legislative and congressional district values.",
        "priority": "high",
        "dependencies": [
          21
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 23,
        "title": "Onboarding: Address Entry & Geographic Lock",
        "description": "Integrate address collection into the onboarding flow and auto-assign users to districts using Mapbox Geocoding.",
        "details": "1. Add a new screen in the Expo Router onboarding flow for 'Address Entry'. 2. Integrate Mapbox Geocoding API (`https://api.mapbox.com/geocoding/v5/mapbox.places/`) to convert user input to lat/lng. 3. Call the District Lookup Engine (Task 22) to determine the user's Maryland County, Legislative District, and Congressional District. 4. Update the user's profile with these values. 5. Provide a fallback dropdown for manual district selection.",
        "testStrategy": "Perform end-to-end onboarding tests with real Maryland addresses. Verify that the 'profiles' table in Supabase is updated with the correct district and county information.",
        "priority": "high",
        "dependencies": [
          22
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 24,
        "title": "AI-Powered Voter Registration Verification (Enlistment)",
        "description": "Build the 'Enlistment' mission flow involving camera capture, client-side redaction, and Gemini 1.5 Flash verification.",
        "details": "1. Create a camera UI that prompts users to photograph their MD Voter Registration Card. 2. Implement client-side redaction using 'expo-image-manipulator' to blur sensitive fields (Voter ID#, full address) before upload. 3. Create a Supabase Edge Function 'verify-voter-registration' that sends the redacted image to Gemini 1.5 Flash. 4. Prompt Gemini to: 'Is this a Maryland Voter Registration Card? Extract: Name, Party, County.' 5. Match Gemini output against the user's profile and set 'voter_registration_verified' to TRUE if successful.",
        "testStrategy": "Test with sample MD registration cards. Verify that the redaction logic correctly obscures sensitive areas. Ensure the Edge Function handles successful matches and rejections gracefully with clear UI feedback.",
        "priority": "high",
        "dependencies": [
          21,
          23
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 25,
        "title": "War Room HUD: Polymarket Integration & Countdown Timers",
        "description": "Replace the generic feed with the 'War Room' dashboard featuring live odds and election countdowns.",
        "details": "1. Integrate Polymarket Gamma API to fetch win-probabilities for the MD-6 and Montgomery County Executive races. 2. Build a polling mechanism (Edge Function) to update these odds every 15 minutes and cache them. 3. Implement high-impact countdown components in the UI for the Registration Deadline (June 2, 2026), Early Voting, and Election Day. 4. Display live odds using gauge or progress bar components with 'Neon Green' accents.",
        "testStrategy": "Validate API response parsing from Polymarket. Check that timers correctly calculate time remaining relative to the hardcoded deadlines. Simulate an odds shift >5% to verify notification triggers (if applicable).",
        "priority": "medium",
        "dependencies": [
          21
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 26,
        "title": "Weekly Notification Pulse & Oath Renewal",
        "description": "Implement the Saturday 11:00 AM notification and the accompanying 'Oath Renewal' animation flow.",
        "details": "1. Configure 'expo-notifications' to schedule a recurring local or push notification every Saturday at 11:00 AM. 2. Build a 2-second 'Oath Renewal' animation screen (Hard Party logo fade-in). 3. Implement logic to award +10 XP upon user confirmation. 4. Ensure tapping the notification deep-links directly to this animation.",
        "testStrategy": "Set a test notification for 2 minutes in the future and verify receipt. Ensure the animation plays smoothly and XP is correctly incremented in the database.",
        "priority": "medium",
        "dependencies": [
          21
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 27,
        "title": "Relational Raid: Contact Sync & Recruitment Engine",
        "description": "Implement contact syncing to identify and recruit Maryland voters from the user's phonebook.",
        "details": "1. Use 'expo-contacts' to request permissions and sync phone numbers. 2. Store hashed contacts in 'synced_contacts'. 3. Match contacts against the app's user base. 4. Display tactical icons: Green (Verified in app), Yellow (In app, unverified), Gray (Not in app). 5. Implement an SMS invitation mechanism that tracks referrals via unique links. 6. Award +100 XP to the recruiter only after the invitee completes Task 24 (Enlistment).",
        "testStrategy": "Test contact matching logic with a mock voter dataset. Verify that XP is only awarded once the invitee's 'voter_registration_verified' flag is set to TRUE.",
        "priority": "medium",
        "dependencies": [
          21,
          24
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 28,
        "title": "Digital Ballot UI with 'Neon Green' Endorsements",
        "description": "Build the replica down-ballot interface that highlights endorsed candidates for the user's specific district.",
        "details": "1. Create a 'Ballot' tab in the app. 2. Fetch ballot data from 'md_ballot_races' and 'md_ballot_candidates' filtered by the user's assigned district from Task 23. 3. Apply 'Neon Green' styling to any candidate where 'hard_party_endorsed' is TRUE. 4. Implement a 'Commit to Vote' toggle for each race that saves to 'user_ballot_commitments'. 5. Add a progress tracker for 'Ballot Completion'.",
        "testStrategy": "Populate mock ballot data for Montgomery County District 15. Verify that only candidates in that specific district appear and that endorsements are visually distinct.",
        "priority": "high",
        "dependencies": [
          21,
          23
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 29,
        "title": "Tactical Mission Set: GPS & Verification Logic",
        "description": "Implement the specific workflows for Early Raid (GPS) and Election Day Siege (Google Maps deep linking).",
        "details": "1. Update 'Commands' tab to display the 4 pre-loaded missions. 2. For 'Early Raid': Implement 'expo-location' check-in within 100m of known Early Voting centers + photo upload. 3. For 'Election Day Siege': Use 'expo-linking' to open Google Maps with the user's precinct coordinates. 4. Use Gemini 1.5 Flash to verify 'I Voted' stickers and polling place photos for both missions. 5. Display 'Squad Status' showing completion badges for district peers.",
        "testStrategy": "Mock GPS coordinates to simulate being at an Early Voting center. Verify that Gemini correctly identifies an 'I Voted' sticker in a test photo. Ensure Google Maps opens with the correct destination URL.",
        "priority": "medium",
        "dependencies": [
          21,
          23,
          24
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 30,
        "title": "Data Seeding Script for Montgomery County & MD-6",
        "description": "Create the SQL/Node seeding scripts to populate the initial districts, missions, and ballot data for the Alpha launch.",
        "details": "1. Write a script to insert the 4 core missions into the 'directives' table with specific deadlines. 2. Create the full ballot data (races/candidates) for Montgomery County (Districts 14-20) and MD-6 for the 2026 Primary. 3. Map endorsed candidates (placeholder or actual) with the 'hard_party_endorsed' flag.",
        "testStrategy": "Run script on a staging database and verify that the 'Ballot' and 'Commands' tabs display the expected data for a user assigned to Montgomery County District 15.",
        "priority": "high",
        "dependencies": [
          21
        ],
        "status": "pending",
        "subtasks": []
      }
    ],
    "metadata": {
      "created": "2026-01-31T02:18:39.293Z",
      "updated": "2026-02-05T01:32:23.517Z",
      "description": "Tasks for master context"
    }
  }
}